name: 09 - Functions
on: 
  workflow_dispatch:
  pull_request:

jobs:
  echo1:
    runs-on: ubuntu-latest
    steps:
      - name: Print PR Title
        run: echo "${{ github.event.pull_request.title }}"
      
      - name: Print PR Labels
        run:  echo "${{ toJson(github.event.pull_request.labels) }}"

      - name: Bug Step
        if: ${{failure() && !cancelled() && contains(github.event.pull_request.labels, 'fix')}}
        run: echo "I am a bug fix"

      - name: Sleep for 20 seconds
        run: |
          sleep 20

      - name: 'Failing Step'
        run: |
          exit 1

      - name: 'I will be skipped'
        if: ${{ success() }}
        run: |
          echo "I will print if previous steps succeed."

      - name: 'I will execute'
        if: ${{ failure() }}
        run: |
          echo "I will execute"

      - name: 'I will execute'
        if: ${{ !cancelled() }}
        run: |
          echo "I will execute"

      - name: 'I will execute when cancelled'
        if: ${{ cancelled() }}
        run: |
          echo "I will execute when cancelled"